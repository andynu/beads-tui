{"id":"tui-0v6","content_hash":"49e6407fada758e12d50b644a0f6dbe82f6103292930639c03ba53f1566b70b0","title":"Implement JSONL parser for .beads/issues.jsonl","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-14T07:58:27.791436428-05:00","updated_at":"2025-11-14T08:06:34.996147087-05:00","closed_at":"2025-11-14T08:06:34.996147087-05:00","source_repo":".","dependencies":[{"issue_id":"tui-0v6","depends_on_id":"tui-ywv","type":"parent-child","created_at":"2025-11-14T07:58:27.792391659-05:00","created_by":"daemon"}]}
{"id":"tui-1oj","content_hash":"b1c467406f144cf210c6966523f3a64833aac5211f34fee6b16ca49e45b5b23a","title":"Evaluate reading SQLite database directly instead of JSONL","description":"Current architecture: beads-tui reads .beads/issues.jsonl which requires:\n1. bd daemon to export (30s debounce)\n2. Or manual bd export -o .beads/issues.jsonl\n3. Parsing JSONL on every refresh\n\nPerformance issues:\n- User sees empty TUI until first export completes\n- Must wait 30s or manually export after creating issues\n- JSONL parsing overhead on every refresh\n- File watching detects changes but data is stale\n\nProposed solution: Read .beads/beads.db directly\n- Instant access to latest data\n- No export delay\n- SQLite query performance \u003e JSONL parsing\n- Can still watch .beads/beads.db for changes\n\nImplementation options:\n1. Use beads reference source in ./beads/ as guide\n2. Copy minimal storage/sqlite package\n3. Import beads as library (if possible)\n\nChild tasks to create if we proceed:\n- Research beads SQLite schema\n- Implement direct DB reader\n- Add DB file watcher instead of JSONL\n- Handle schema version compatibility\n- Test with real beads databases\n\nDecision needed: Is direct DB access worth the complexity vs fixing JSONL export delay?","notes":"UPDATED EVALUATION:\n\nACTUAL PROBLEM DISCOVERED:\n- Daemon export has been blocked for ~1 hour\n- Error: \"JSONL is newer than database (import first to avoid data loss)\"\n- This causes TUI to show indefinitely stale data\n- Requires manual bd export --force to resolve\n\nJSONL APPROACH PROBLEMS (real):\n- Export blocks on timestamp mismatch (safety mechanism)\n- Can happen from: git operations, manual edits, clock skew\n- When blocked, no automatic recovery\n- User sees stale data with no indication why\n\nSQLITE APPROACH BENEFITS (real):\n- Eliminates timestamp mismatch issues entirely\n- Always shows current operational state\n- No manual intervention needed\n- Still has: schema coupling, git misalignment, complexity\n\nALTERNATIVE SOLUTIONS:\n1. Auto-force export - daemon resolves conflicts automatically\n2. TUI DB fallback - read DB when JSONL stale\n3. Hybrid - read DB for display, watch JSONL for git changes\n\nRECOMMENDATION CHANGED: Implement hybrid approach\n- Primary read: SQLite (always current)\n- Watch JSONL for git sync events (pulls/merges)\n- Schema coupling acceptable for this use case\n- Complexity justified by reliability improvement\n\nOriginal \"700ms latency\" concern was wrong - real issue is staleness/blocking.","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-14T08:37:18.904620369-05:00","updated_at":"2025-11-14T09:44:13.464091704-05:00","source_repo":".","dependencies":[{"issue_id":"tui-1oj","depends_on_id":"tui-ywv","type":"parent-child","created_at":"2025-11-14T08:37:18.905506137-05:00","created_by":"daemon"}]}
{"id":"tui-6wy","content_hash":"9ae009c94849de54997fb49efb52e35529f3c98f1451bc6a456a8cb32d082192","title":"Build issue detail panel with full metadata display","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-14T07:58:28.871089929-05:00","updated_at":"2025-11-14T08:35:27.399912505-05:00","closed_at":"2025-11-14T08:35:27.399912505-05:00","source_repo":".","dependencies":[{"issue_id":"tui-6wy","depends_on_id":"tui-ywv","type":"parent-child","created_at":"2025-11-14T07:58:28.871940064-05:00","created_by":"daemon"}]}
{"id":"tui-79b","content_hash":"87065d376cce80ba92961f94ae79b24734d86b56ab2a7345a47c0b6e5763edf4","title":"Write tests for core TUI components","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-14T07:58:29.256010873-05:00","updated_at":"2025-11-14T07:58:29.256010873-05:00","source_repo":".","dependencies":[{"issue_id":"tui-79b","depends_on_id":"tui-ywv","type":"parent-child","created_at":"2025-11-14T07:58:29.257073859-05:00","created_by":"daemon"}]}
{"id":"tui-8vc","content_hash":"cfd42db5be79fa5bf888deb74ae6b6bd5420e5406e314ab6015f77357710f4f6","title":"Implement filesystem monitoring with fsnotify","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-14T07:58:28.134430249-05:00","updated_at":"2025-11-14T08:30:33.927569727-05:00","closed_at":"2025-11-14T08:30:33.927569727-05:00","source_repo":".","dependencies":[{"issue_id":"tui-8vc","depends_on_id":"tui-ywv","type":"parent-child","created_at":"2025-11-14T07:58:28.135102614-05:00","created_by":"daemon"}]}
{"id":"tui-a8h","content_hash":"9ee1b5113aad8819b6cc3e3160ec0fda88b52110a5bdae3ed3144e1dd015069a","title":"Add vim-style keyboard navigation (j/k/gg/G/search)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-14T07:58:28.677417834-05:00","updated_at":"2025-11-14T09:40:35.072065741-05:00","closed_at":"2025-11-14T09:40:35.072065741-05:00","source_repo":".","dependencies":[{"issue_id":"tui-a8h","depends_on_id":"tui-ywv","type":"parent-child","created_at":"2025-11-14T07:58:28.678334119-05:00","created_by":"daemon"}]}
{"id":"tui-bgx","content_hash":"a3a75b42f0ba59ae8150be6ff4512f84a0f2dc1787e2b873032f3cc81667dc18","title":"Fix highlight text contrast - darken text on selected item","description":"Problem:\n- Selected item in list has light gray highlight background\n- Text remains the same color (priority colors, white, etc.)\n- Low contrast makes text hard to read on the highlight\n- Especially bad for white/light colored text\n\nScreenshot shows:\n- \"tui-qxy Evaluate updating issue description command\" highlighted\n- Light text on light gray background = poor readability\n\nExpected behavior:\n- Selected item text should be darker/black for better contrast\n- Or highlight background should be darker\n- Text should be easily readable regardless of selection state\n\nCurrent implementation:\n- tview List widget uses default selection colors\n- No custom selection styling applied\n\nSolutions:\n\n1. Set selected item colors explicitly\n   - Use List.SetSelectedBackgroundColor()\n   - Use List.SetSelectedTextColor()\n   - Example: dark blue background + white text\n   - Example: light background + black text\n\n2. Use tview styling\n   - Set selection style in tview theme\n   - Apply to all List widgets globally\n\n3. Invert colors on selection\n   - Background becomes foreground\n   - Foreground becomes background\n   - Classic terminal selection style\n\nRecommended: Solution 1 with dark background\n- SetSelectedBackgroundColor(tcell.ColorNavy or tcell.ColorBlue)\n- SetSelectedTextColor(tcell.ColorWhite)\n- High contrast, easy to see what's selected\n\nReference: Screenshot shows tui-qxy highlighted with poor contrast","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-14T08:48:11.725186988-05:00","updated_at":"2025-11-14T08:55:30.16782581-05:00","closed_at":"2025-11-14T08:55:30.16782581-05:00","source_repo":".","dependencies":[{"issue_id":"tui-bgx","depends_on_id":"tui-ywv","type":"parent-child","created_at":"2025-11-14T08:48:11.726085479-05:00","created_by":"daemon"}]}
{"id":"tui-bne","content_hash":"5123789f14ae7dc3d56b906b5a6d8e4cdcbe04a3e114e3ac2c87334c72bec581","title":"Add tree view mode for issue dependency visualization","description":"Add alternative view mode showing issue dependencies as a tree structure.\n\nCurrent state:\n- Flat list view segregated by status (ready/blocked/in_progress)\n- Dependencies shown in detail panel\n- Cannot see dependency relationships at a glance\n\nProposed feature:\n- Press 't' to toggle between list view and tree view\n- Tree view shows issues with dependency nesting\n- Visual indicators for dependency types:\n  - Indentation for hierarchy\n  - Tree characters (├──, └──, │)\n  - Color-coded by dependency type\n\nExample tree view:\n```\nDEPENDENCY TREE\n├─● bd-123 [P1] Parent epic\n│ ├─● bd-124 [P1] Child task 1\n│ ├─○ bd-125 [P1] Child task 2 (blocked by bd-126)\n│ └─◆ bd-126 [P0] Child task 3 (in progress)\n├─● bd-200 [P2] Another issue\n│ └─● bd-201 [P2] Depends on bd-200\n└─● bd-300 [P3] Standalone issue\n```\n\nView modes:\n1. List view (current) - Status-based grouping\n2. Tree view - Dependency hierarchy\n3. Toggle with 't' key\n\nImplementation considerations:\n\nTree building algorithm:\n- Find root issues (no incoming \"blocks\" dependencies)\n- Recursively traverse \"blocks\" and \"parent-child\" relationships\n- Handle cycles (shouldn't exist but be defensive)\n- Show orphaned issues at bottom\n\nDisplay format:\n- Use tview.TreeView widget OR\n- Build tree manually with formatted strings in List\n- Color-code by priority/status\n- Show dependency type in tree branches\n\nState management:\n- Track current view mode (list vs tree)\n- Preserve selection when switching views\n- Update status bar to show current mode\n\nNavigation in tree view:\n- j/k still work for up/down\n- Enter to expand/collapse nodes? Or always expanded?\n- Details panel still shows selected issue\n\nBenefits:\n- Visualize epic → child relationships\n- See blockers in hierarchy\n- Understand work dependencies\n- Useful for planning and prioritization\n\nPriority: P2 (nice-to-have, list view works fine for now)","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-14T08:47:17.311893792-05:00","updated_at":"2025-11-14T08:47:35.588723854-05:00","source_repo":".","dependencies":[{"issue_id":"tui-bne","depends_on_id":"tui-ywv","type":"parent-child","created_at":"2025-11-14T08:47:17.312578802-05:00","created_by":"daemon"}]}
{"id":"tui-fuy","content_hash":"4b2dad405f5df0131b85946b1e4836cd88d2ae3bfbcd0844451838752c2adbb5","title":"Fix deadlock in QueueUpdateDraw during initial load","description":"Error: fatal error: all goroutines are asleep - deadlock!\n\nStack trace shows deadlock in refreshIssues() function at line 67 (QueueUpdateDraw call).\n\nRoot cause: QueueUpdateDraw() is being called BEFORE app.Run() starts. The application event loop isn't running yet, so QueueUpdateDraw blocks forever waiting for the app to process the update.\n\nLocation: cmd/beads-tui/main.go:128 (refreshIssues() called before app.Run())\n\nFix: Move initial refreshIssues() call to AFTER app.Run() starts, or call it directly without QueueUpdateDraw wrapping during initial load.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-14T08:37:06.807080701-05:00","updated_at":"2025-11-14T08:39:41.719499901-05:00","closed_at":"2025-11-14T08:39:41.719499901-05:00","source_repo":".","dependencies":[{"issue_id":"tui-fuy","depends_on_id":"tui-ywv","type":"parent-child","created_at":"2025-11-14T08:37:06.807804311-05:00","created_by":"daemon"}]}
{"id":"tui-gtb","content_hash":"569bdd28dfa84ece4a2e14f426a3426b9265609a6859f9f14c145c4f2efd67c6","title":"Set up project structure and Go module","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-14T07:58:27.960363013-05:00","updated_at":"2025-11-14T08:06:32.693401107-05:00","closed_at":"2025-11-14T08:06:32.693401107-05:00","source_repo":".","dependencies":[{"issue_id":"tui-gtb","depends_on_id":"tui-ywv","type":"parent-child","created_at":"2025-11-14T07:58:27.961189648-05:00","created_by":"daemon"}]}
{"id":"tui-hxu","content_hash":"f66f7f1a1274b6e1ee35efc1b5dfd657033340e9dfc0e258fbce971a2c6ee731","title":"Add filtering capabilities (priority, type, status)","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-14T07:58:29.064911827-05:00","updated_at":"2025-11-14T07:58:29.064911827-05:00","source_repo":".","dependencies":[{"issue_id":"tui-hxu","depends_on_id":"tui-ywv","type":"parent-child","created_at":"2025-11-14T07:58:29.066096034-05:00","created_by":"daemon"}]}
{"id":"tui-nsn","content_hash":"1826161c09e99fb91b60d15cc535d0db053e93183abd8c569722f4116f6e0162","title":"Build basic tview application with three-panel layout","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-14T07:58:28.308172338-05:00","updated_at":"2025-11-14T08:06:39.996833503-05:00","closed_at":"2025-11-14T08:06:39.996833503-05:00","source_repo":".","dependencies":[{"issue_id":"tui-nsn","depends_on_id":"tui-ywv","type":"parent-child","created_at":"2025-11-14T07:58:28.309037885-05:00","created_by":"daemon"}]}
{"id":"tui-p62","content_hash":"1fc8fa2e3197fa27ed9b210b39c6f236a7bc8dc3c2fd092ad984c56c52f2a9fe","title":"Enable text selection/highlighting in TUI","description":"Problem:\n- Cannot select/highlight text in the TUI with mouse\n- Cannot copy issue IDs, descriptions, or any text content\n- Normal terminal text selection doesn't work\n\nExpected behavior:\n- Should be able to click and drag to highlight text\n- Should be able to copy text to clipboard with Ctrl+Shift+C or terminal's copy method\n- Standard terminal text selection should work\n\nCurrent behavior:\n- Mouse events are captured by tview application\n- EnableMouse(true) in main.go:167 captures all mouse events for navigation\n- Terminal emulator never sees mouse events for selection\n\nRoot cause:\n- app.EnableMouse(true) tells tview to capture mouse input\n- This prevents the terminal from handling mouse selection\n- tview uses mouse for navigation/clicks, not text selection\n\nPossible solutions:\n\n1. Disable mouse mode entirely\n   - Remove EnableMouse(true)\n   - Users can still use j/k/arrow keys for navigation\n   - Terminal text selection works normally\n   - Trade-off: No mouse clicking on items\n\n2. Add keybinding to toggle mouse mode\n   - Press 'm' to toggle between mouse navigation and text selection\n   - Shows in status bar which mode is active\n   - User can switch as needed\n\n3. Implement custom text selection in tview (complex)\n   - Would need to handle text selection ourselves\n   - Display selected text differently\n   - Copy to clipboard on Ctrl+C\n   - Very complex, not worth it\n\nRecommended: Solution 1 (disable mouse) or Solution 2 (toggle)\n\nMost users prefer keyboard navigation in TUI apps anyway, and text selection is critical for copying issue IDs, error messages, etc.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-14T08:41:27.360005001-05:00","updated_at":"2025-11-14T08:44:42.344334667-05:00","closed_at":"2025-11-14T08:44:42.344334667-05:00","source_repo":".","dependencies":[{"issue_id":"tui-p62","depends_on_id":"tui-ywv","type":"parent-child","created_at":"2025-11-14T08:41:27.360977656-05:00","created_by":"daemon"}]}
{"id":"tui-qxy","content_hash":"fef07c323b1c3e83a78e5e11128623ead0a07a88156c1b8673dd3cb8024fb302","title":"Evaluate updating issue description command","description":"Evaluate adding TUI command to update issue descriptions and other fields.\n\nCurrent state:\n- TUI is read-only\n- Users must exit TUI and use bd CLI to update issues\n- No way to edit description, design, acceptance criteria, etc.\n\nPotential features to add:\n1. Press 'e' on selected issue to edit in $EDITOR\n2. Press 'u' to update status (open/in_progress/blocked)\n3. Press 'p' to change priority\n4. Press 'd' to add/remove dependencies\n5. Press 'l' to add/remove labels\n\nImplementation considerations:\n- Need to spawn $EDITOR for text fields\n- Need to write changes back to JSONL or DB\n- Need to handle concurrent edits (file locking?)\n- Should we integrate with bd CLI commands?\n- Or implement direct DB writes?\n\nRelated to tui-1oj (DB access evaluation) - if we read DB directly, we could also write directly.\n\nDecision needed:\n- Is editing in TUI valuable, or should users stick to bd CLI?\n- If yes, which fields are most important to edit?\n- What's the interaction model (modal forms vs inline editing)?\n\nLow priority (P2) since bd CLI works fine for now.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-14T08:40:09.673715681-05:00","updated_at":"2025-11-14T08:40:21.568494578-05:00","source_repo":".","dependencies":[{"issue_id":"tui-qxy","depends_on_id":"tui-ywv","type":"parent-child","created_at":"2025-11-14T08:40:09.674829437-05:00","created_by":"daemon"}]}
{"id":"tui-t96","content_hash":"530f139b402646ae79f2186e2d7b3f61c6eaed61273f09226e4d1319c4d7280b","title":"Add color themes and visual polish","description":"","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-14T07:58:29.513859789-05:00","updated_at":"2025-11-14T07:58:29.513859789-05:00","source_repo":".","dependencies":[{"issue_id":"tui-t96","depends_on_id":"tui-ywv","type":"parent-child","created_at":"2025-11-14T07:58:29.514743587-05:00","created_by":"daemon"}]}
{"id":"tui-xh1","content_hash":"368e98ae2725817e8031279f2fa061a1d74e503cbfc88c9752e85497b1276606","title":"Implement ready/blocked issue segregation logic","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-14T07:58:28.487755737-05:00","updated_at":"2025-11-14T08:06:42.029632868-05:00","closed_at":"2025-11-14T08:06:42.029632868-05:00","source_repo":".","dependencies":[{"issue_id":"tui-xh1","depends_on_id":"tui-ywv","type":"parent-child","created_at":"2025-11-14T07:58:28.488625053-05:00","created_by":"daemon"}]}
{"id":"tui-ydr","content_hash":"085c021c6452f234b55d976d072550e8de34949c58e6164df439e53ddd5ddd45","title":"Add keybinding to toggle mouse mode","description":"Enhancement to allow switching between mouse navigation and text selection.\n\nCurrent state (after tui-p62):\n- Mouse disabled by default\n- Terminal text selection works\n- Cannot click on issues with mouse\n\nProposed feature:\n- Press 'm' to toggle mouse mode on/off\n- Status bar shows current mode: \"Mouse: ON\" or \"Mouse: OFF\"\n- State persists for session\n\nBenefits:\n- Users who want mouse clicking can enable it\n- Users who want text selection can disable it\n- Best of both worlds with easy toggle\n\nImplementation:\n- Track mouseEnabled bool state\n- On 'm' keypress, call app.EnableMouse(!mouseEnabled)\n- Update status bar to show current mode\n- Default to mouse disabled (text selection enabled)\n\nLow priority (P3) since keyboard navigation + text selection covers most use cases.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-11-14T08:44:04.129353238-05:00","updated_at":"2025-11-14T08:44:12.858886973-05:00","source_repo":".","dependencies":[{"issue_id":"tui-ydr","depends_on_id":"tui-ywv","type":"parent-child","created_at":"2025-11-14T08:44:04.130297163-05:00","created_by":"daemon"}]}
{"id":"tui-ywv","content_hash":"29f718fb35b0cc4a506312b29daa57caba2d06fc9be79d60bfd7a086bd2e8503","title":"Build beads-tui: Terminal UI for beads issue tracker","description":"","status":"open","priority":1,"issue_type":"epic","created_at":"2025-11-14T07:58:15.563484928-05:00","updated_at":"2025-11-14T07:58:15.563484928-05:00","source_repo":"."}
{"id":"tui-ywv.1","content_hash":"866224e23186836b7871b79a7b0689eac4b501c024162a9dfdb827f834f82150","title":"Add paging support for long issue details","description":"Problem:\n- Long issue descriptions/designs overflow the detail panel\n- Currently scrollable with mouse wheel (but mouse is disabled for text selection)\n- No keyboard controls for scrolling the detail panel\n- User can't read full content of long issues\n\nCurrent behavior:\n- Detail panel is SetScrollable(true) and SetWrap(true)\n- Mouse mode disabled globally (tui-p62) for terminal text selection\n- No keyboard bindings for detail panel scrolling\n- Long content is cut off at bottom of visible area\n\nExpected behavior:\n- Keyboard controls to scroll detail panel up/down\n- Page up/down for faster navigation\n- Clear indicator when content is scrolled/truncated\n- Vim-style scrolling (Ctrl-d/Ctrl-u for half-page)\n\nProposed solution:\n1. Add keybindings for detail panel scrolling:\n   - Ctrl-e / Ctrl-y: scroll down/up one line (vim style)\n   - Ctrl-d / Ctrl-u: scroll down/up half page (vim style)\n   - PageDown / PageUp: scroll full page\n   - Home / End: jump to top/bottom\n\n2. Add visual indicator:\n   - Show scrollbar or indicator in detail panel border\n   - Display position indicator (e.g., \"[Top]\", \"[50%]\", \"[Bottom]\")\n   - Or show \"... (more)\" at bottom when content is truncated\n\n3. Mode switching approach:\n   - Default focus on issue list (current behavior)\n   - Press Tab or Enter to focus detail panel (enable scrolling)\n   - ESC to return focus to issue list\n   - Show which panel has focus in status bar\n\nImplementation notes:\n- tview.TextView supports ScrollToBeginning/ScrollToEnd\n- Need to track which panel has focus\n- Update SetInputCapture to route scroll keys to active panel\n- May need to calculate visible lines for relative scrolling\n\nAlternative: Use tview's built-in focus management with SetFocus()","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-14T09:45:10.121212083-05:00","updated_at":"2025-11-14T09:45:10.121212083-05:00","source_repo":"."}
